<html>
<head>
<style>
dt {
	text-transform: capitalize;
	font-weight: bold;
}
</style>
</head>
<body>
<p>Hi! On this page, you will find URLs for templates you can use in your OBS' browser sources.</p>

<p>This URLs identify <b>YOU</b> as a user, do NOT share them. They contain your secret identifier <b><%= secret %></b> (see <a href="/docs/">documentation</a> for details).</p>

<p>There are many templates you can try. Play around to get a sense of them all.</p>

<h1>Single player layouts</h1>

<dl>
<% layouts['1p'].forEach(layout => { %>
<dt><%= layout.file.replace(/_/g, ' ') %></dt>
<dd><a href="/view/<%= layout.file %>/<%= secret %>">-</a>
	<% if (layout.has_screenshot) { %>
	<br /><img src="/views/1p/<%= layout.file %>.jpg" width="640"/>
	<% } %>
</dd>
<% } %>
</dl>

<h1>Competition layouts</h1>

<dl>
<% layouts.mp.forEach(layout => { %>
<dt><%= layout.file.replace(/_/g, ' ') %></dt>
<dd><a href="/view/<%= layout.file %>/<%= secret %>">-</a>
	<% if (layout.has_screenshot) { %>
	<br /><img src="/views/mp/<%= layout.file %>.jpg" width="640"/>
	<% } %>
</dd>
<% } %>
</dl>

<p>If you'd like to change your secret, visit your <a href="/settings">settings</a> page to revoke the token (and generate a new one)</p>

<script>
document.querySelectorAll('dd a').forEach(a => {
	// Views are identified by their secrets and only get game frame data, we can supply the links over http and save SSL processing cost.
	const http_link = a.href.replace(/^https:/, 'http:');

	a.href = http_link;
	a.textContent = http_link; // make the link show the fully qualified url

	/*
	a.addEventListener('click', async (evt) => {
		evt.preventDefault();

		const result = await navigator.permissions.query({ name: 'clipboard-write' });

		if (result.state === 'granted') {
			const type = 'text/plain';
			const blob = new Blob([a.href], { type });
			const data = [new ClipboardItem({ [type]: blob })];

			try {
				await navigator.clipboard.write(data);
				alert('URL copied to clipboard.\nPaste it in your OBS\'s browser source and enjoy!');
			}
			catch(err) {
				alert('Could not copy URL to clipboard')
			}
		}
	});
	/**/
});
</script>
</body>
</html>
